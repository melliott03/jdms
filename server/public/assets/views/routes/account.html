<!-- START ANGULAR-CARD.JS -->
<div data-ng-controller="creditCardCtrl">

  <form action="#"
name="cardForm"
data-card
data-width="500"
data-card-container="#card-container"
data-placeholders="cardPlaceholders"
data-options="cardOptions"
data-messages="cardMessages"
>

<div>
<input placeholder="Card number" type="text" name="CardNumber" card-number data-ng-model="card.number" />

<input placeholder="Full name" type="text" name="CardName" card-name data-ng-model="card.name" />
</div>
<div>
<input placeholder="MM / YYYY" type="text" name="CardExpiry" card-expiry data-ng-model="card.expiry" />

<input placeholder="CVC" type="text" name="CardCvc" card-cvc data-ng-model="card.cvc" />

<input type="button" value="Change card" data-ng-click="changeCard()" />
<input type="button" value="Clear" data-ng-click="clear()" />
</div>

</form>

<div id="card-container"></div>

</div>
<!-- END ANGULAR-CARD.JS -->



<!-- BEGIN ANGULAR-CHECK.JS -->
<div data-ng-controller="checkCtrl">

  <form action="#"
    data-check
    data-width="400"
    data-check-container="#check-container"
    data-values="checkValues"
    >

    <div>
        <input placeholder="Bank Name" type="text" check-bank-name data-ng-model="check.bankName" />

        <input placeholder="Full name" type="text" check-name data-ng-model="check.name" />
    </div>
    <div>
        <input placeholder="Routing Number" type="text" check-routing-number data-ng-model="check.routingNumber" />

        <input placeholder="Account Number" type="text" check-account-number data-ng-model="check.accountNumber" />
    </div>
    <div>
        <input placeholder="Order" type="text" check-order data-ng-model="check.order" />
    </div>
    <div>
        <input type="button" value="Change check" data-ng-click="changeCheck()" />
        <input type="button" value="Clear" data-ng-click="clear()" />
      </div>

  </form>

  <div id="check-container"></div>

  <script src="/assets/vendors/check/lib/js/check.js"></script>
  <script src="/assets/vendors/angular-check/src/check.js"></script>


</div>
<!-- END ANGULAR-CHECK.JS -->



<!-- BEGIN PLAID NON-ANGULAR VERSION -->
<div ng-controller="plaidCtrl">
  <button id='linkButton'>Open Link - Institution Select</button>
  <script src="https://cdn.plaid.com/link/stable/link-initialize.js"></script>
  <script>
  var linkHandler = Plaid.create({
    selectAccount: true,
    env: 'tartan',
    clientName: 'Client Name',
    key: '09b483e7f2a23fc9ebc47dd904323f',
    product: 'auth',
    onLoad: function() {
      // The Link module finished loading.
    },
    onSuccess: function(public_token, metadata) {
      // The onSuccess function is called when the user has successfully
      // authenticated and selected an account to use.
      //
      // When called, you will send the public_token and the selected
      // account ID, metadata.account_id, to your backend app server.
      //
      var plaidSuccessObject = {
        public_token: public_token,
        account_id: metadata.account_id
      };
      $.post("/authenticate",
        {
            name: "Donald Duck",
            city: "Duckburg"
        },
        function(data, status){
            alert("Data: " + data + "\nStatus: " + status);
        });
      // sendDataToBackendServer({
      //   public_token: public_token,
      //   account_id: metadata.account_id
      // });

      angular.element(document.getElementById('plaidCtrl')).scope().sendDataToBackend(plaidSuccessObject);
      // angular.scope().sendDataToBackend(plaidSuccessObject);

      sendDataToBackend(plaidSuccessObject);
      console.log('Public Token: ' + public_token);
      console.log('Customer-selected account ID: ' + metadata.account_id);
    },
    onExit: function() {
      // The user exited the Link flow.
    },
  });

  // Trigger the standard Institution Select view
  document.getElementById('linkButton').onclick = function() {
    linkHandler.open();
  };
  </script>
</div>
<!-- END PLAID NON-ANGULAR VERSION -->

<!-- BEGIN PLAID NON-ANGULAR VERSION 2-->
<!-- <div ng-controller="plaidCtrl">
<button id='linkButton'>Open Plaid Link</button>
<script src="https://cdn.plaid.com/link/stable/link-initialize.js"></script>
<script>
var linkHandler = Plaid.create({
  env: 'tartan',
  clientName: 'Stripe / Plaid Test',
  key: '09b483e7f2a23fc9ebc47dd904323f',
  product: 'auth',
  selectAccount: true,
  onSuccess: function(public_token, metadata) { -->
    <!-- // Send the public_token and account ID to your app server.
    plaidObject.public_token = public_token;
    plaidObject.metadata = public_token;
    console.log('public_token: ' + public_token);
    console.log('account ID: ' + metadata.account_id);
    console.log('plaidObject: ', plaidObject);
    sendToken(plaidObject);

  },
});

// Trigger the Link UI
document.getElementById('linkButton').onclick = function() {
  linkHandler.open();
};
</script>
</div> -->
<!-- END PLAID NON-ANGULAR VERSION 2-->

<!-- BEGIN PLAID ANGULAR VERSION -->
        <!-- <div ng-controller="plaidCtrl">
            <div class="container">
                <div class="clearfix">
                    <h1 class="pull-left">Angular Plaid Link Example</h1>

                    <ul class="list-unstyled pull-right" style="margin-top: 10px;">
                        <li><strong>Docs:</strong></li>
                        <li><a href="https://github.com/plaid/link">Plaid Link</a></li>
                        <li><a href="https://github.com/csbarnes/angular-plaid-link">angular-plaid-link</a></li>
                    </ul>
                </div>

                <hr/>

                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Bank Select</strong></p>
                        <button class="btn btn-success" ng-click="openPlaid()" ng-disabled="!plaidIsLoaded()">
                            Link Account
                        </button>

                        <br/>
                        <br/>
                        <p><em>or</em></p>

                        <p><strong>Direct Bank Login</strong></p>

                        <button class="btn btn-primary" ng-click="openPlaid('us')" ng-disabled="!plaidIsLoaded()">
                            US Bank
                        </button>

                        <button class="btn btn-danger" ng-click="openPlaid('bofa')" ng-disabled="!plaidIsLoaded()">
                            Link Bank of America
                        </button>
                    </div>

                    <div class="col-md-6">
                        <h4>Public Token:</h4>
                        <pre>{{token}}</pre>
                    </div>
                </div>
            </div>
          </div> -->
            <script src="https://cdn.plaid.com/link/stable/link-initialize.js"></script>
<!-- END PLAID ANGULAR VERSION -->

<!-- BEGIN STRIPE PAYMENT FORM -->




<form  ng-submit="charge()" id="payment-form">
  <!-- action="/stripecc" method="POST" -->
  <span class="payment-errors"></span>

  <div class="form-row">
    <label>
      <span>Card Number</span>
      <input type="text" size="20" data-stripe="number" ng-model='payment.card.number' name="number">
    </label>
  </div>

  <div class="form-row">
    <label>
      <span>Expiration (MM/YY)</span>
      <input type="text" size="2" data-stripe="exp_month" ng-model='payment.card.exp_month'>
    </label>
    <span> / </span>
    <input type="text" size="2" data-stripe="exp_year" ng-model='payment.card.exp_year' name="expiry">
  </div>

  <div class="form-row">
    <label>
      <span>CVC</span>
      <input type="text" name="cvc" size="4" data-stripe="cvc" ng-model='payment.card.cvc' />
    </label>
  </div>

  <div class="form-row">
    <label>
      <span>Billing Zip</span>
      <input type="text" size="6" data-stripe="address_zip" ng-model='payment.card.address_zip'>
    </label>
  </div>

  <input type="submit" class="submit" value="Submit Payment">
</form>

<form action="/stripecc" method="POST">
  <script
    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
    data-key="pk_test_C6pNjUH41hCQ87RXmeLBIAa5"
    data-amount="999"
    data-name="All Nations Translation & Interpretation, LLC."
    data-description="Widget"
    data-image="/img/documentation/checkout/marketplace.png"
    data-locale="auto"
    data-zip-code="true">
  </script>
</form>
<!-- END STRIPE PAYMENT FORM -->


<!-- BEGIN STRIPE CHECK PAYMENT FORM -->
<p>
  Enter Bank Acount Info
</p>
<form  ng-submit="ccAuthorize()" id="payment-form">
  <!-- action="/stripecc" method="POST" -->
  <span class="payment-errors"></span>
  <div class="form-row">
    <label>
    <span>Account Holder Type</span>
    <!-- <input type="text" ng-model='payment.check.account_holder_type'> -->
    <select name="singleSelect" id="singleSelect" ng-model="payment.check.account_holder_type">
      <option value="">---Please select---</option> <!-- not selected / blank option -->
      <option value="individual">individual</option> <!-- interpolation -->
      <option value="company">company</option>
    </select><br>
    </label>
  </div>

  <div class="form-row">
    <label>
      <span>Routing Number</span>
      <input type="text" size="20" ng-model='payment.check.routing_number'>
    </label>
  </div>

  <div class="form-row">
    <label>
      <span>Account Number</span>
      <input type="text" size="20" ng-model='payment.check.account_number' name="account_number">
    </label>
  </div>

  <div class="form-row">
    <label>
      <span>Name</span>
      <input type="text" ng-model='payment.check.account_holder_name' />
    </label>
  </div>

  <!-- <div class="form-row">
    <label>
      <span>Billing Address</span>
      <input type="text" size="6" data-stripe="address" ng-model='payment.check.address_line1'>
    </label>
  </div> -->

  <input type="submit" class="submit" value="Submit Payment">
</form>
<!-- END STRIPE CHECK PAYMENT FORM -->

<strong>Enter micro depost amounts:</strong>
<p>
  These deposits will take 1-2 business days to appear on the customerâ€™s online statement. The statement description for these deposits will be VERIFICATION. Your customer will need to relay the value of the two deposits to you.
  There is a limit of 10 failed verification attempts. Once this limit has been crossed, the bank account will be unable to be verified.
</p>
<form  ng-submit="submitBankMicroDeposits(microDeposit)">
  <!-- action="/stripecc" method="POST" -->
  <span class="payment-errors"></span>
  <div class="form-row">
    <label>
      <span>Deposit Amounts</span>
      <input type="text" size="2" ng-model='microDeposit.one' >
      <input type="text" size="2" ng-model='microDeposit.two' >
    </label>
  </div>
  <input type="submit" class="submit" value="Submit">
</form>
