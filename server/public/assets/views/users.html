<!DOCTYPE html>
<html ng-app="myApp">
  <head>
    <meta charset="utf-8">
    <title>Users</title>
    <script src="https://maps.google.com/maps/api/js?libraries=placeses,visualization,drawing,geometry,places"></script>

    <script type="text/javascript" src="/assets/vendors/jquery.min.js"></script>
    <!-- TWILIO SCRIPTS jquery needed above twilio scripts-->
    <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script> -->
    <script src="https://media.twiliocdn.com/sdk/js/common/v0.1/twilio-common.min.js"></script>
    <script src="https://media.twiliocdn.com/sdk/js/conversations/v0.13/twilio-conversations.min.js"></script>
    <script src="/quickstart.js"></script>

    <!-- STYLES -->
    <link rel="stylesheet" href="/assets/vendors/angular-material/angular-material.min.css">
    <link rel="stylesheet" href="/assets/styles/style.css">
    <!-- TWILIO VIDEO STYLE-->
    <link rel="stylesheet" href="https://media.twiliocdn.com/sdk/quickstart/conversations-quickstart.min.css">


    <!-- START angular-material-data-table, script below-->
    <link rel="stylesheet" type="text/css" href="/assets/vendors/angular-material-data-table/md-data-table.min.css" >
    <!-- END angular-material-data-table -->

    <link rel="stylesheet" href="/assets/vendors/angular-ui-grid/ui-grid.min.css">
    <link rel="stylesheet" href="/assets/vendors/angular-ui-bootstrap/ui-bootstrap-csp.css">

    <!-- Google Auto Complete Address -->
    <!-- <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB5GSiF0fh0og5Lbx_CYsqUvNyiDv4XhRI&libraries=places"></script> -->

    <!-- GoogleMap Display http://angular-ui.github.io/angular-google-maps/?JRwnVeTsM4n98QWm-oHQDw&ved=0CBMQFjAAOAo&usg=AFQjCNGZWf3yx7Vg-YGZEM9xiHCJLP3Oeg#!/use -->
    <script type="text/javascript" src="/assets/vendors/lodash/lodash.min.js"></script>


    <!-- SCRIPTS -->
    <script type="text/javascript" src="/assets/vendors/angular/angular.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-animate/angular-animate.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-touch/angular-touch.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-messages/angular-messages.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-aria/angular-aria.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-material/angular-material.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-route/angular-route.min.js"></script>
    <!-- <script type="text/javascript" src="/assets/scripts/app.min.js"></script> -->


    <script type="text/javascript" src="/assets/vendors/angular-smart-table/smart-table.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-ui-grid/ui-grid.min.js"></script>
    <script type="text/javascript" src="/assets/vendors/angular-ui-bootstrap/ui-bootstrap.js"></script>


    <script src="https://rawgit.com/allenhwkim/angularjs-google-maps/master/build/scripts/ng-map.js"></script>


    <!-- START angular-moment-picker -->
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment-with-locales.js"></script>
    <script src="/assets/vendors/angular-moment-picker/angular-moment-picker.min.js"></script> -->
    <!-- END angular-moment-picker also see style above -->

    <!-- Google Auto Complete Address -->
    <script type="text/javascript" src="/assets/vendors/ng-places-autocomplete/ngPlacesAutocomplete.min.js"></script>

    <!-- GoogleMap Display http://angular-ui.github.io/angular-google-maps/?JRwnVeTsM4n98QWm-oHQDw&ved=0CBMQFjAAOAo&usg=AFQjCNGZWf3yx7Vg-YGZEM9xiHCJLP3Oeg#!/use -->
    <script src="/assets/vendors/angular-simple-logger/dist/angular-simple-logger.min.js"></script>
    <script src="/assets/vendors/angular-google-maps/dist/angular-google-maps.min.js"></script>

    <!-- Angular-Google-Chart -->
    <!-- unminified for development -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-google-chart/0.1.0/ng-google-chart.js" type="text/javascript"></script> -->
    <!-- <script type="text/javascript" src="/assets/vendors/angular-google-chart/ng-google-chart.min.js"></script> -->
    <!-- minified for production -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-google-chart/0.1.0/ng-google-chart.min.js" type="text/javascript"></script> -->
    <script type="text/javascript" src="/assets/vendors/angular-google-chart/ng-google-chart.js"></script>

    <!-- START angular-material-data-table, stylesheet above-->
    <script src="/assets/vendors/angular-material-data-table/md-data-table.min.js"></script>
    <!-- END angular-material-data-table -->

    <link data-require="bootstrap-css@3.2.0" data-semver="3.2.0" rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <script data-require="ui-bootstrap@0.11.0" data-semver="0.11.0" src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.0.min.js"></script>

    <script type="text/javascript" src="/assets/scripts/app.js"></script>
    <script type="text/javascript" src="/assets/scripts/controllers.js"></script>
    <script type="text/javascript" src="/assets/scripts/authFactory.js"></script>
    <script type="text/javascript" src="/assets/scripts/authController.js"></script>
    <script type="text/javascript" src="/assets/scripts/factories.js"></script>
    <script type="text/javascript" src="/assets/scripts/smarttableexample.js"></script>
    <script type="text/javascript" src="/assets/vendors/lr-sticky-header/lrStickyHeader.js"></script>
    <script type="text/javascript" src="/assets/scripts/smart-table.js"></script>
    <script type="text/javascript" src="/assets/vendors/smart-table-sticky-header/stStickyHeader.js"></script>
    <link rel="stylesheet" href="/assets/vendors/angular-responsive-tables/angular-responsive-tables.min.css">
    <script type="text/javascript" src="/assets/vendors/angular-responsive-tables/angular-responsive-tables.min.js"></script>
    <link rel="stylesheet" href="/assets/vendors/ng-inline-edit-master/ng-inline-edit.min.css">
    <script type="text/javascript" src="/assets/vendors/ng-inline-edit-master/ng-inline-edit.js"></script>
    <link href="/assets/vendors/angular-xeditable/dist/css/xeditable.css" rel="stylesheet">
    <script src="/assets/vendors/angular-xeditable/dist/js/xeditable.js"></script>
    <script src="/assets/vendors/angular-plaid-link/src/angular-plaid-link.js"></script>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

  </head>
  <body ng-cloak>

    <div ng-controller="AuthenticationController ">
      <md-button class="md-warn" ng-click="logout()">
        logout
      </md-button>
    </div>
    <div ng-controller="ShowController" layout="column" ng-cloak>
      <md-toolbar class="md-warn">
        <div class="md-toolbar-tools">
          <h2 class="md-flex">Work</h2>

            <div ng-if="contractor()">
              <md-button><a href="#home">HOME</a></md-button>
              <md-button><a href="#acceptedView">ACCEPTED </a></md-button>
              <md-button><a href="#availibleView">NEW </a></md-button>
            </div>
            <div ng-if="customer()">
              <md-button><a href="#home">HOME</a></md-button>
              <md-button><a href="#add">ADD</a></md-button>
              <md-button><a href="#view">VIEW</a></md-button>
            </div>

            <!-- <md-button><a href="#view">*Work(past)(current)</a></md-button>
            <md-button><a href="#view">*Money</a></md-button> -->

            <!-- <p id="welcome" align="right">
              Hello
            </p> -->
            <div ng-controller="AddController">
            <p  align="right">
              Hello {{logedinUser.response.firstname}}  ({{logedinUser.response.role}})
            </p>
          </div>
        </div>
      </md-toolbar>
      <md-content flex layout-padding>


<!-- BEGIN PLAID NON-ANGULAR VERSION -->
<div ng-controller="plaidCtrl">
  <button id='linkButton'>Open Link - Institution Select</button>
  <button id='bofaButton'>Open Link - Bank of America</button>
  <script src="https://cdn.plaid.com/link/stable/link-initialize.js"></script>
  <script>
  var linkHandler = Plaid.create({
    selectAccount: true,
    env: 'tartan',
    clientName: 'Client Name',
    key: '09b483e7f2a23fc9ebc47dd904323f',
    product: 'auth',
    onLoad: function() {
      // The Link module finished loading.
    },
    onSuccess: function(public_token, metadata) {
      // The onSuccess function is called when the user has successfully
      // authenticated and selected an account to use.
      //
      // When called, you will send the public_token and the selected
      // account ID, metadata.account_id, to your backend app server.
      //
      var plaidSuccessObject = {
        public_token: public_token,
        account_id: metadata.account_id
      };
      $.post("/authenticate",
        {
          public_token: public_token,
          account_id: metadata.account_id
        },
        function(data, status){
            alert("Data: " + data + "\nStatus: " + status);
        });
      // sendDataToBackendServer({
      //   public_token: public_token,
      //   account_id: metadata.account_id
      // });

      // angular.element(document.getElementById('plaidCtrl')).scope().sendDataToBackend(plaidSuccessObject);
      // angular.scope().sendDataToBackend(plaidSuccessObject);

      // sendDataToBackend(plaidSuccessObject);
      console.log('Public Token: ' + public_token);
      console.log('Customer-selected account ID: ' + metadata.account_id);
    },
    onExit: function() {
      // The user exited the Link flow.
    },
  });

  // Trigger the Bank of America login view directly
  document.getElementById('bofaButton').onclick = function() {
    linkHandler.open('bofa');
  };

  // Trigger the standard Institution Select view
  document.getElementById('linkButton').onclick = function() {
    linkHandler.open();
  };
  </script>
</div>
<!-- END PLAID NON-ANGULAR VERSION -->

<!-- BEGIN PLAID NON-ANGULAR VERSION 2-->
<!-- <div ng-controller="plaidCtrl">
<button id='linkButton'>Open Plaid Link</button>
<script src="https://cdn.plaid.com/link/stable/link-initialize.js"></script>
<script>
var linkHandler = Plaid.create({
  env: 'tartan',
  clientName: 'Stripe / Plaid Test',
  key: '09b483e7f2a23fc9ebc47dd904323f',
  product: 'auth',
  selectAccount: true,
  onSuccess: function(public_token, metadata) { -->
    <!-- // Send the public_token and account ID to your app server.
    plaidObject.public_token = public_token;
    plaidObject.metadata = public_token;
    console.log('public_token: ' + public_token);
    console.log('account ID: ' + metadata.account_id);
    console.log('plaidObject: ', plaidObject);
    sendToken(plaidObject);

  },
});

// Trigger the Link UI
document.getElementById('linkButton').onclick = function() {
  linkHandler.open();
};
</script>
</div> -->
<!-- END PLAID NON-ANGULAR VERSION 2-->

<!-- BEGIN PLAID ANGULAR VERSION -->
        <!-- <div ng-controller="plaidCtrl">
            <div class="container">
                <div class="clearfix">
                    <h1 class="pull-left">Angular Plaid Link Example</h1>

                    <ul class="list-unstyled pull-right" style="margin-top: 10px;">
                        <li><strong>Docs:</strong></li>
                        <li><a href="https://github.com/plaid/link">Plaid Link</a></li>
                        <li><a href="https://github.com/csbarnes/angular-plaid-link">angular-plaid-link</a></li>
                    </ul>
                </div>

                <hr/>

                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Bank Select</strong></p>
                        <button class="btn btn-success" ng-click="openPlaid()" ng-disabled="!plaidIsLoaded()">
                            Link Account
                        </button>

                        <br/>
                        <br/>
                        <p><em>or</em></p>

                        <p><strong>Direct Bank Login</strong></p>

                        <button class="btn btn-primary" ng-click="openPlaid('us')" ng-disabled="!plaidIsLoaded()">
                            US Bank
                        </button>

                        <button class="btn btn-danger" ng-click="openPlaid('bofa')" ng-disabled="!plaidIsLoaded()">
                            Link Bank of America
                        </button>
                    </div>

                    <div class="col-md-6">
                        <h4>Public Token:</h4>
                        <pre>{{token}}</pre>
                    </div>
                </div>
            </div>
          </div> -->
            <script src="https://cdn.plaid.com/link/stable/link-initialize.js"></script>
<!-- END PLAID ANGULAR VERSION -->




            <main ng-view></main>
            <!--  -->
          </md-content>


          <!-- <div ng-if="{{logedinUser.response.role}} && contractor" ng-include="/add.html'"></div>
          <div ng-if="{{logedinUser.response.role}} && customer" ng-include="/home.html'"></div> -->

</div>

  </body>
</html>
